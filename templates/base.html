{% load static %}
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Gestione pratiche{% endblock %}{% if current_app_name %} â€” {{ current_app_name }}{% endif %}</title>
  
  <!-- Tema CSS -->
  <link rel="stylesheet" href="{% static 'css/app.css' %}?v=20251117">
  <link rel="stylesheet" href="{% static 'css/layout.css' %}?v=20251117">
  <link rel="stylesheet" href="{% static 'css/theme.css' %}?v=20251117">
  <link rel="stylesheet" href="{% static 'css/components.css' %}?v=20251117">
  <link rel="stylesheet" href="{% static 'css/form-enhancements.css' %}?v=20251117">
  
  <!-- Favicon -->
  <link rel="icon" href="{% static 'img/favicon.ico' %}">
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  
  <!-- Theme Manager (caricato per primo per evitare flash) -->
  <script src="{% static 'js/theme-manager.js' %}"></script>
  
  {% block extra_head %}{% endblock %}
</head>
<body>
<header>
  <div class="navbar">
    <div class="brand">
      <a href="{% url 'home' %}" class="brand-link">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;margin-right:8px">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
        MyGest
      </a>
    </div>
    <nav class="nav-actions">
      <!-- Link alle home delle app -->
      <a href="/anagrafiche/">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        Anagrafiche
      </a>
      <a href="{% url 'documenti:home' %}">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" y1="13" x2="8" y2="13"/>
          <line x1="16" y1="17" x2="8" y2="17"/>
          <polyline points="10 9 9 9 8 9"/>
        </svg>
        Documenti
      </a>
      <a href="{% url 'comunicazioni:home' %}">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <rect x="2" y="4" width="20" height="16" rx="2"/>
          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
        </svg>
        Comunicazioni
      </a>
      <a href="/fascicoli/">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
        </svg>
        Fascicoli
      </a>
      <a href="/pratiche/">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
          <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
        </svg>
        Pratiche
      </a>
      <a href="/archivio-fisico/">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <polyline points="21 8 21 21 3 21 3 8"/>
          <rect x="1" y="3" width="22" height="5"/>
          <line x1="10" y1="12" x2="14" y2="12"/>
        </svg>
        Archivio
      </a>
      <a href="{% url 'help-index' %}">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <circle cx="12" cy="12" r="10"/>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
          <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
        Help
      </a>
      
      <!-- Theme toggle button -->
      <button id="theme-toggle" class="theme-toggle" aria-label="Cambia tema" title="Cambia tema">
        <svg class="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg class="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
      
      <!-- Admin -->
      <a href="/admin/">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:4px">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243M9.879 9.879l-4.243-4.243m12.728 0l-4.243 4.243M9.879 14.121l-4.243 4.243"/>
        </svg>
        Admin
      </a>
    </nav>
  </div>
</header>
<main class="container">
  {% if breadcrumbs %}
    <nav aria-label="Percorso" class="mt-3">
      <ol class="breadcrumb">
        {% for crumb in breadcrumbs %}
          <li class="breadcrumb-item {% if forloop.last %}active{% endif %}"{% if forloop.last %} aria-current="page"{% endif %}>
            {% if crumb.url and not forloop.last %}
              <a href="{{ crumb.url }}">{{ crumb.label }}</a>
            {% else %}
              {{ crumb.label }}
            {% endif %}
          </li>
        {% endfor %}
      </ol>
    </nav>
  {% endif %}
  {% if messages %}
    <div class="messages" style="margin-top:16px;">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags|default:'info' }}" role="alert">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
  {% block content %}{% endblock %}
</main>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Select2 -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- Toast System -->
<script src="{% static 'js/toast.js' %}"></script>

<!-- Form Enhancements -->
<script src="{% static 'js/form-enhancements.js' %}"></script>

<!-- Bootstrap Bundle (optional per componenti JS) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% block extra_js %}{% endblock %}

</body>
</html>